{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "App.svelte",
    "Map.svelte",
    "Panel.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport Map from './Map.svelte';\n\timport Panel from './Panel.svelte';\n\timport { getPlaces, getBoundary, rndPlace, shuffle } from './utils.js';\n\t\n\tlet map;\n\tlet mapstyle = './data/mapstyle.json';\n\tlet places;\n\t\n\tlet game = {\n\t\tstarted: false,\n\t\tturn: 0,\n\t\tscore: 0,\n\t\tplace: null,\n\t\tplaces: null,\n\t\tmessage: null\n\t}\n\t\n\t// New turn. Randomly select a place + get its polygon\n\tfunction nextTurn() {\n\t\tif (!game.started) { game.started = true };\n\t\tlet id = 'boundary';\n\t\t\n\t\t// Get a random place (right answer)\n\t\tlet place = rndPlace(places);\n\t\tgame.place = place;\n\t\t\n\t\t// Create an array of possible answers\n\t\tgame.places = [];\n\t\tgame.places.push(place);\n\t\twhile (game.places.length < 3) {\n\t\t\tlet place = rndPlace(places);\n\t\t\tif (!game.places.includes(place)) {\n\t\t\t\tgame.places.push(place);\n\t\t\t}\n\t\t}\n\t\tgame.places = shuffle(game.places);\n\t\t\n\t\t// Get geographic boundary of selected place\n\t\tlet boundary;\n\t\tgetBoundary(place.code)\n\t\t.then(result => {\n\t\t\t// Remove previous boundary from the map\n\t\t\tif (map.getLayer(id)) {\n\t\t\t\tmap.removeLayer(id);\n\t\t\t\tmap.removeSource(id);\n\t\t\t}\n\t\t\t\n\t\t\t// Add new boundary to the map\n\t\t\tmap.addSource(id, {\n\t\t\t\t'type': 'geojson',\n\t\t\t\t'data': result.geometry\n\t\t\t});\n\t\t\tmap.addLayer({\n\t\t\t\t'id': id,\n\t\t\t\t'type': 'line',\n\t\t\t\t'source': id,\n\t\t\t\t'layout': {},\n\t\t\t\t'paint': {\n\t\t\t\t\t'line-color': '#fff',\n\t\t\t\t\t'line-width': 2\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// Fit map to boundary\n\t\t\tmap.fitBounds(result.bounds, { padding: 20, animate: false });\n\t\t});\n\t}\n\t\n\t// Check if chosen place is correct\n\tfunction checkPlace(code) {\n\t\tif (code == game.place.code) {\n\t\t\tgame.score += 1;\n\t\t\tgame.message = `You got it!`;\n\t\t} else {\n\t\t\tgame.message = `Nope, the answer was ${game.place.name}`;\n\t\t}\n\t\tgame.turn += 1;\n\t\tgame.place = null;\n\t\tgame.places = null;\n\t}\n\t\n\t// Get geography codes and names from API (initiation of app)\n\tgetPlaces().then(result => { places = result; })\n\t\n</script>\n\n<style>\n\t:global(body) {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n\tmain {\n\t\tpadding: 20px;\n\t}\n\th1 {\n\t\tmargin-top: 10px;\n\t}\n\t.block {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t}\n</style>\n\n<Panel>\n\t<main>\n\t\t<h1>Can you guess the local authority?</h1>\n\t\t<h3>Score {game.score} / {game.turn} {#if game.turn > 0}({Math.round((game.score / game.turn) * 100)}%){/if}</h3>\n\t\t{#if !game.started && places}\n\t  \t<button on:click={nextTurn}>Let's get started!</button>\n\t\t{:else if game.places}\n\t\t{#each game.places as place}\n\t  \t<button class=\"block\" on:click={checkPlace(place.code)}>{place.name}</button>\n\t\t{/each}\n\t\t{:else if game.message}\n\t\t\t<h3>{game.message}</h3>\n\t\t\t<button on:click={nextTurn}>Show me another!</button>\n\t\t{/if}\n\t</main>\n</Panel>\n\n<Map style={mapstyle} bind:map={map} />",
    "<script>\n\timport { onMount } from 'svelte';\n\timport mapbox from 'mapbox-gl';\n\t\n\texport let location = {\n\t\tbounds: [[-10.760, 49.864], [1.863, 59.479]] // Lebanon bounding box\n\t};\n\texport let style;\n\t\n\texport let map;\n\tlet container;\n\tlet options;\n\t\n\tfunction resetView() {\n\t\tmap.fitBounds(location.bounds);\n\t}\n\t\n\tif (location.bounds) {\n\t\toptions = { bounds: location.bounds };\n\t} else if (location.lon && location.lat) {\n\t\toptions = {\n\t\t\tcenter: [location.lon, location.lat]\n\t\t}\n\t\tif (location.zoom) {\n\t\t\toptions.zoom = location.zoom;\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tconst link = document.createElement('link');\n\t\tlink.rel = 'stylesheet';\n\t\tlink.href = 'https://unpkg.com/mapbox-gl/dist/mapbox-gl.css';\n\n\t\tlink.onload = () => {\n\t\t\tmap = new mapbox.Map({\n\t\t\t\tcontainer,\n\t\t\t\tstyle: style,\n\t\t\t\tinteractive: false,\n\t\t\t\t...options\n\t\t\t});\n\t\t\tmap.scrollZoom.disable();\n\t\t};\n\n\t\tdocument.head.appendChild(link);\n\n\t\treturn () => {\n\t\t\tmap.remove();\n\t\t\tlink.parentNode.removeChild(link);\n\t\t};\n\t});\n</script>\n\n<style>\n\tdiv {\n\t\twidth: 60%;\n\t\theight: 100%;\n\t\tposition: fixed;\n\t\tright: 0;\n\t}\n\t@media (max-width: 600px) {\n\t\tdiv {\n\t\t\twidth: 100%;\n\t\t\theight: 75%;\n\t\t\tposition: absolute;\n\t\t}\n\t}\n</style>\n\n<div bind:this={container}>\n\t{#if map}\n\t\t<slot></slot>\n\t{/if}\n</div>",
    "<style>\n\tdiv {\n\t\tz-index: 2;\n\t\twidth: 40%;\n\t\tposition: absolute;\n\t}\n\t@media (max-width: 600px) {\n\t\tdiv {\n\t\t\twidth: 100%;\n\t\t\ttop: 75%;\n\t\t}\n\t}\n</style>\n\n<div>\n\t<slot></slot>\n</div>"
  ],
  "names": [],
  "mappings": "AAwFS,IAAI,AAAE,CAAC,AACd,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,CAAC,AACX,CAAC,AACD,IAAI,eAAC,CAAC,AACL,OAAO,CAAE,IAAI,AACd,CAAC,AACD,EAAE,eAAC,CAAC,AACH,UAAU,CAAE,IAAI,AACjB,CAAC,AACD,MAAM,eAAC,CAAC,AACP,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,IAAI,AACZ,CAAC;AChDD,GAAG,cAAC,CAAC,AACJ,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,QAAQ,CAAE,KAAK,CACf,KAAK,CAAE,CAAC,AACT,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AAC1B,GAAG,cAAC,CAAC,AACJ,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,GAAG,CACX,QAAQ,CAAE,QAAQ,AACnB,CAAC,AACF,CAAC;AChED,GAAG,eAAC,CAAC,AACJ,OAAO,CAAE,CAAC,CACV,KAAK,CAAE,GAAG,CACV,QAAQ,CAAE,QAAQ,AACnB,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AAC1B,GAAG,eAAC,CAAC,AACJ,KAAK,CAAE,IAAI,CACX,GAAG,CAAE,GAAG,AACT,CAAC,AACF,CAAC"
}